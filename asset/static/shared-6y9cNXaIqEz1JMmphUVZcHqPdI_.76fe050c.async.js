"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9294],{91058:function(J,A,r){var U=r(9783),i=r.n(U),w=r(19632),v=r.n(w),d=r(97857),m=r.n(d),K=r(5574),D=r.n(K),C=r(89035),h=r(45605),j=r(64317),H=r(31199),B=r(5966),$=r(38345),W=r(17186),G=r(24739),S=r(23345),x=r(83622),V=r(83062),z=r(85576),g=r(67294),X=r(11106),F=r(12491),P=r(62597),f=r(79245),Z=r(3616),L=r(36146),n=r(85893),o="docker-image",p=(0,g.forwardRef)(function(e,ne){var re=(0,g.useState)(o),Q=D()(re,2),Y=Q[0],N=Q[1],c=(0,g.useRef)(),te=(0,g.useState)(""),k=D()(te,2),ae=k[0],ue=k[1],M=new L.Uo("components.appForm");(0,g.useImperativeHandle)(ne,function(){return{addEnvItem:function(a){var l,_=(l=c.current)===null||l===void 0?void 0:l.getList(),u=!1;if(_==null||_.map(function(E){if(E.name==a.name){u=!0;return}}),!u){var s;(s=c.current)===null||s===void 0||s.add(a)}},addEnvNameValue:function(a,l){this.addEnvItem({name:a,value:l})},clear:function(){var a;(a=c.current)===null||a===void 0||(a=a.getList())===null||a===void 0||a.map(function(l,_){var u;(u=c.current)===null||u===void 0||u.remove(_)})}}});function q(t){try{var a,l;t==""&&(t=ee());for(var _=(a=(l=c.current)===null||l===void 0||(l=l.getList())===null||l===void 0?void 0:l.length)!==null&&a!==void 0?a:0,u=_;u>=0;u--){var s,E,b=(s=c.current)===null||s===void 0?void 0:s.get(u);_-=1,(E=c.current)===null||E===void 0||E.remove(u)}var T=t.split(`
`),R=_+1;T.map(function(y){var O,I=y.split("=");I.length<2||((O=c.current)===null||O===void 0||O.add({name:I[0],value:I.slice(1).join("=")},R),R++)})}catch(y){console.log(y)}}function le(){Y!="code"?N("code"):N(o)}function ee(){if(c&&c.current&&c.current.getList){var t,a=(t=c.current)===null||t===void 0?void 0:t.getList();if(a){var l=[];return a.forEach(function(_){l.push("".concat(_.name,"=").concat(_.value))}),l.join(`
`)}else return""}else return""}function oe(t){var a,l,_,u,s,E,b={},T={help:(0,f.y)((a=t.rule)===null||a===void 0?void 0:a.kind,P.fp.EnvValueTypeOnePanel)?M.formatOnePanel(t.name):M.formatUser(t.labels),name:"value",label:M.format("createEnvFormValue"),rules:[{required:e.requireValue?!0:(0,f.y)((l=t.rule)===null||l===void 0?void 0:l.kind,P.fp.EnvValueRuleRequired)}],addonAfter:!0,disabled:e.showDisableValue||(0,f.y)((_=t.rule)===null||_===void 0?void 0:_.kind,P.fp.EnvValueRuleDisabled),placeholder:t.label};if((0,f.y)((u=t.rule)===null||u===void 0?void 0:u.kind,P.fp.EnvValueTypeSelect)){var R;return(0,n.jsx)(j.Z,m()(m()({fieldProps:b},T),{},{initialValue:t.value,width:e.showInDrawer?"sm":"md",options:((R=t.rule)===null||R===void 0?void 0:R.option)&&t.rule.option.map(function(O){return{label:O.name,value:O.value}})}),t.name)}else if((0,f.y)((s=t.rule)===null||s===void 0?void 0:s.kind,P.fp.EnvValueTypeSelectMultiple)){var y;return(0,n.jsx)(j.Z,m()(m()({mode:"tags"},T),{},{fieldProps:b,convertValue:function(I){return Array.isArray(I)?I:I.split(",")},width:e.showInDrawer?"sm":"md",options:((y=t.rule)===null||y===void 0?void 0:y.option)&&t.rule.option.map(function(O){return{label:O.name,value:O.value}})}),t.name)}else return(0,f.y)((E=t.rule)===null||E===void 0?void 0:E.kind,P.fp.EnvValueTypeNumber)?(0,n.jsx)(H.Z,m()(m()({fieldProps:b},T),{},{width:e.showInDrawer?"sm":"md",rules:[].concat(v()(T.rules),[{pattern:new RegExp("^[0-9]*$")}])}),t.name):(0,n.jsx)(B.Z,m()(m()({fieldProps:b},T),{},{width:e.showInDrawer?"sm":"md"}),t.name)}return(0,n.jsxs)($.Z,m()(m()({headerBordered:!0,extra:e.showCodeMode||e.showImportButton?(0,n.jsxs)(S.Z,{children:[e.showImportButton&&(0,n.jsx)("div",{style:{marginBottom:"-25px"},children:(0,n.jsx)(F.Z,{title:M.format("createEnvFormEnvImport"),onImport:function(a){return q(a),!0},onLoad:function(a){if(a.indexOf("=")<0)throw new Error(L.FD.format("commonFileIncorrectFormat",{name:"env"}));return!0}})}),e.showCodeMode?(0,n.jsx)(x.ZP,{icon:(0,n.jsx)(C.Z,{}),type:Y=="code"?"primary":"default",onClick:le,children:M.format("createEnvFormEnvCode")},"code"):""]}):(0,n.jsx)(n.Fragment,{})},e.drawerProps),{},{children:[(0,n.jsx)(W.u,{style:{marginTop:10},name:e.name?e.name:"environment",actionRef:c,creatorButtonProps:e.showAddButton?{creatorButtonText:e.addButtonLabel?e.addButtonLabel:M.format("createEnvFormListAddButton")}:!1,copyIconProps:!1,deleteIconProps:e.showDeleteButton,actionRender:function(a,l,_,u){var s,E,b=(s=c.current)===null||s===void 0?void 0:s.get(a.key);return b&&(0,f.y)((E=b.rule)===null||E===void 0?void 0:E.kind,P.fp.EnvValueRuleInEnvFile)?[(0,n.jsx)(V.Z,{title:M.format("createEnvFormListInEnvFile"),children:(0,n.jsx)(x.ZP,{type:"text",icon:(0,n.jsx)(h.Z,{})})},"inEnvFile")]:[_[0]]},min:100,label:e.listLabel,transform:function(a,l,_){return i()({},l,a.map(function(u){return u&&u.value&&(Array.isArray(u.value)?u.value=u.value.filter(function(s){return s!=""}).join(","):u.value=u.value.toString()),u}))},tooltip:e.tooltip,children:function(a,l,_){var u,s=_.getCurrentRowData();return(0,n.jsxs)(G.UW,{style:{marginBottom:"5px"},children:[(0,n.jsx)(B.Z,{width:e.showInDrawer?"sm":"md",name:"name",label:M.format("createEnvFormName"),required:!0,rules:[{required:!0}],disabled:e.showDisableName||(0,f.y)((u=s.rule)===null||u===void 0?void 0:u.kind,P.fp.EnvValueRuleInEnvFile),placeholder:M.format("createEnvFormName")},l),oe(s)]})}}),e.showCodeMode&&(0,n.jsx)(z.Z,{width:Z.ob,open:Y=="code",onCancel:function(){return N("docker-image")},onOk:function(){q(ae),N("docker-image")},children:(0,n.jsx)(X.ZP,{onChange:function(a){return ue(a)},value:ee(),height:Z.Ed,theme:"dark"})})]}))});A.Z=p},62597:function(J,A,r){r.d(A,{$G:function(){return C},Ct:function(){return z},Tb:function(){return $},XH:function(){return G},cl:function(){return H},fp:function(){return j},fu:function(){return K},iE:function(){return x},nL:function(){return D},xU:function(){return Z},xb:function(){return X},ze:function(){return P}});var U=r(15009),i=r.n(U),w=r(99289),v=r.n(w),d=r(63713),m="com.dpanel.container.description",K="com.dpanel.container.title",D={Nanosecond:1,Microsecond:1e3,Millisecond:1e3*1e3,Second:1e3*1e3*1e3,Minute:60*1e3*1e3*1e3,Hour:3600*1e3*1e3*1e3};function C(n){return h.apply(this,arguments)}function h(){return h=v()(i()().mark(function n(o){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/dpanel/api/app/site/create-by-image",{method:"POST",data:o}));case 1:case"end":return e.stop()}},n)})),h.apply(this,arguments)}var j={EnvValueRuleRequired:1,EnvValueRuleDisabled:2,EnvValueRuleInEnvFile:4,EnvValueTypeNumber:1024,EnvValueTypeText:2048,EnvValueTypeSelect:4096,EnvValueTypeSelectMultiple:8192,EnvValueTypeOnePanel:16384};function H(n){return B.apply(this,arguments)}function B(){return B=v()(i()().mark(function n(o){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/dpanel/api/app/site/get-list",{method:"POST",data:o}));case 1:case"end":return e.stop()}},n)})),B.apply(this,arguments)}function $(n){return W.apply(this,arguments)}function W(){return W=v()(i()().mark(function n(o){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o.download=!1,e.next=3,(0,d.request)("/dpanel/api/app/log/run",{method:"POST",data:o});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},n)})),W.apply(this,arguments)}function G(n){return S.apply(this,arguments)}function S(){return S=v()(i()().mark(function n(o){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o.download=!0,e.next=3,(0,d.request)("/dpanel/api/app/log/run",{method:"POST",data:o,responseType:"blob"});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},n)})),S.apply(this,arguments)}function x(n){return V.apply(this,arguments)}function V(){return V=v()(i()().mark(function n(o){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o.id=String(o.id),e.next=3,(0,d.request)("/dpanel/api/app/site/get-detail",{data:o,method:"POST"});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},n)})),V.apply(this,arguments)}function z(n){return g.apply(this,arguments)}function g(){return g=v()(i()().mark(function n(o){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/dpanel/api/app/container/delete",{method:"POST",data:o}));case 1:case"end":return e.stop()}},n)})),g.apply(this,arguments)}function X(n){return F.apply(this,arguments)}function F(){return F=v()(i()().mark(function n(o){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/dpanel/api/app/site/delete",{method:"POST",data:o}));case 1:case"end":return e.stop()}},n)})),F.apply(this,arguments)}function P(n){return f.apply(this,arguments)}function f(){return f=v()(i()().mark(function n(o){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,d.request)("/dpanel/api/app/container/ignore",{method:"POST",data:o}));case 1:case"end":return e.stop()}},n)})),f.apply(this,arguments)}function Z(){return L.apply(this,arguments)}function L(){return L=v()(i()().mark(function n(){return i()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.abrupt("return",(0,d.request)("/dpanel/api/app/site/prune",{method:"POST"}));case 1:case"end":return p.stop()}},n)})),L.apply(this,arguments)}},79245:function(J,A,r){r.d(A,{m:function(){return w},y:function(){return v}});var U=r(64599),i=r.n(U);function w(d){var m=[];if(!d||d=="")return m;var K=d.matchAll(/\$\{(\w+)[:-?=]*(.*?)\}/g),D=i()(K),C;try{for(D.s();!(C=D.n()).done;){var h=C.value;m.push({name:h[1],value:h[2]?h[2].indexOf("-")==0?h[2].substring(1):h[2]:""})}}catch(j){D.e(j)}finally{D.f()}return m}function v(d,m){return!d||!m?!1:(d&m)!==0}}}]);
